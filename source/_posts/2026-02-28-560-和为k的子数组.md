---
title: 560 和为k的子数组
date: 2026-02-28T18:35:00
tags:
  - 前缀和
  - 哈希表
categories:
  - 题解
  - hot100
---

两个位置的前缀和之差就是这段位置之间的子数组之和
前缀和数组要比原数组长1为，bSum[0]通常是个占位符，也就是空数组的前缀和0

对这道题，先计算出所有的前缀和，并存到数组里，并统计前缀和的频率

然后从bSum[0]开始遍历，
根据bSum[i]-bSum[j]=k，则bSum[i]=bSum[j]+k  (i>j)
那么小序号j开始，就只需要判断前缀和频率表中有多少个前缀和等于bSum[j]+k即可。同时为了避免空子数组被计入（也即自己减自己），在计算时要把自己的频率减一。


```java
class Solution {
    public int subarraySum(int[] nums, int k) {
        int[] bSum = new int[nums.length+1];
        Map<Integer,Integer> freq = new LinkedHashMap<>();
        int result=0;

        for(int i=1;i<=bSum.length-1;i++){
            bSum[i] = bSum[i-1]+nums[i-1];
            freq.put(bSum[i],freq.getOrDefault(bSum[i],0)+1);
        }
        freq.put(bSum[0],freq.getOrDefault(bSum[0],0)+1);

        for(int i=0;i<=bSum.length-1;i++){
            freq.put(bSum[i],freq.get(bSum[i])-1);

            int tmp = freq.getOrDefault(bSum[i]+k,0);
            result = result+tmp;
        }

        return result;
    }
}
```
